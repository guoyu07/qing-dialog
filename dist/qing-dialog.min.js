/* qing-dialog v1.0.0 | (c) Mycolorway Design | MIT License */
!function(t,e){"object"==typeof module&&module.exports?module.exports=e(require("jquery"),require("qing-module")):t.QingDialog=e(t.jQuery,t.QingModule)}(this,function(t,e){var n=require=function t(e,n,o){function i(s,u){if(!n[s]){if(!e[s]){var p="function"==typeof require&&require;if(!u&&p)return p(s,!0);if(r)return r(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var a=n[s]={exports:{}};e[s][0].call(a.exports,function(t){var n=e[s][1][t];return i(n?n:t)},a,a.exports,t,e,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(t,e,n){e.exports='<div class="qing-dialog">\n  <div class="wrapper">\n    <a href="javascript:;" class="close-button">\n      <span>&times;</span>\n    </a>\n  </div>\n</div>'},{}],"qing-dialog":[function(n,o,i){var r,s,u,p=function(t,e){function n(){this.constructor=t}for(var o in e)l.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;u=n("./template.coffee"),r=function(e){function n(e){if(n.__super__.constructor.apply(this,arguments),t.extend(this.opts,n.opts,e),null===this.opts.content)throw new Error("QingDialog: option content is required");(this.el=t(".qing-dialog")).length?(this._rerender(),this._unbind()):this._render(),this.id=++n.count,this._bind(),this.el.data("qingDialog",this)}return p(n,e),n.prototype.name="QingDialog",n.opts={content:null,width:600,modal:!0,cls:null,fullscreen:!1,appendTo:"body"},n.count=0,n.removeAll=function(){return t(".qing-dialog").each(function(e,n){var o;return null!=(o=t(n).data("qingDialog"))?o.destroy():void 0})},n.prototype._render=function(){return this.el=t(u),this.wrapper=this.el.find(".wrapper"),this._setup(),this.el.appendTo(this.opts.appendTo),this._show()},n.prototype._rerender=function(){var t;return t=this.el.data("qingDialog"),this.wrapper=t.wrapper,this.content=t.content,this._setup()},n.prototype._bind=function(){return this.el.on("click",function(e){return function(n){if(t(n.target).is(".qing-dialog")&&e.opts.modal)return e.remove()}}(this)).on("click",".close-button",function(t){return function(){return t.remove()}}(this)),t(document).on("keydown.qing-dialog-"+this.id,function(t){return function(e){if(27===e.which)return t.remove()}}(this)),t(window).on("resize.qing-dialog-"+this.id,function(t){return function(){return t._setMaxHeight()}}(this))},n.prototype._setup=function(){return this.opts.cls&&this.el.addClass(this.opts.cls),this.opts.modal&&this.el.addClass("modal"),this.opts.fullscreen&&this.el.addClass("fullscreen"),this.setContent(this.opts.content),this.setWidth(this.opts.width),this._setMaxHeight()},n.prototype._show=function(){return t("body").addClass("qing-dialog-open"),this.el.show()&&s(this.el),this.el.addClass("open")},n.prototype.remove=function(){return this.el.removeClass("open"),this.wrapper.one("transitionend",function(t){return function(){return t.destroy()}}(this))},n.prototype.setContent=function(e){var n;return null!=(n=this.content)&&n.remove(),this.content=t(e).appendTo(this.wrapper)},n.prototype.setWidth=function(t){if(!this.opts.fullscreen)return this.wrapper.css("width",t)},n.prototype._setMaxHeight=function(){if(!this.opts.fullscreen)return this.wrapper.css("maxHeight",document.documentElement.clientHeight-40)},n.prototype._unbind=function(){return this.el.off(),t(document).off("keydown.qing-dialog-"+this.id),t(window).off("resize.qing-dialog-"+this.id)},n.prototype.destroy=function(){return this.trigger("remove"),this.el.remove().removeData("qingDialog"),this._unbind(),t("body").removeClass("qing-dialog-open")},n}(e),s=function(e){var n;return n=e instanceof t?e[0]:e,n.offsetHeight},o.exports=r},{"./template.coffee":1}]},{},[]);return n("qing-dialog")});