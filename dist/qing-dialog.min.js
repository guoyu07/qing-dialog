/* qing-dialog v1.0.0 | (c) Mycolorway Design | MIT License */
!function(t,n){"object"==typeof module&&module.exports?module.exports=n(require("jquery"),require("qing-module")):t.QingDialog=n(t.jQuery,t.QingModule)}(this,function(t,n){var e=require=function t(n,e,o){function i(s,u){if(!e[s]){if(!n[s]){var p="function"==typeof require&&require;if(!u&&p)return p(s,!0);if(r)return r(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var a=e[s]={exports:{}};n[s][0].call(a.exports,function(t){var e=n[s][1][t];return i(e?e:t)},a,a.exports,t,n,e,o)}return e[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(t,n,e){n.exports='<div class="qing-dialog">\n  <div class="wrapper">\n    <a href="javascript:;" class="close-button">\n      <span>&times;</span>\n    </a>\n  </div>\n</div>'},{}],"qing-dialog":[function(e,o,i){var r,s,u,p=function(t,n){function e(){this.constructor=t}for(var o in n)l.call(n,o)&&(t[o]=n[o]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t},l={}.hasOwnProperty;u=e("./template.coffee"),r=function(n){function e(n){if(e.__super__.constructor.apply(this,arguments),t.extend(this.opts,e.opts,n),null===this.opts.content)throw new Error("QingDialog: option content is required");(this.el=t(".qing-dialog")).length?(this._rerender(),this._unbind()):this._render(),this.id=++e.count,this._bind(),this.el.data("qingDialog",this)}return p(e,n),e.prototype.name="QingDialog",e.opts={content:null,width:600,modal:!0,cls:null,fullscreen:!1,appendTo:"body"},e.count=0,e.removeAll=function(){return t(".qing-dialog").each(function(n,e){var o;return null!=(o=t(e).data("qingDialog"))?o._cleanup():void 0})},e.prototype._render=function(){return this.el=t(u),this.wrapper=this.el.find(".wrapper"),this._setup(),this.el.appendTo(this.opts.appendTo),this._show()},e.prototype._rerender=function(){var t;return t=this.el.data("qingDialog"),this.wrapper=t.wrapper,this.content=t.content,this._setup()},e.prototype._bind=function(){return this.el.on("click",function(n){return function(e){if(t(e.target).is(".qing-dialog")&&n.opts.modal)return n.remove()}}(this)).on("click",".close-button",function(t){return function(){return t.remove()}}(this)),t(document).on("keydown.qing-dialog-"+this.id,function(t){return function(n){if(27===n.which)return t.remove()}}(this)),t(window).on("resize.qing-dialog-"+this.id,function(t){return function(){return t._setMaxHeight()}}(this))},e.prototype._setup=function(){return this.opts.cls&&this.el.addClass(this.opts.cls),this.opts.modal&&this.el.addClass("modal"),this.opts.fullscreen&&this.el.addClass("fullscreen"),this.setContent(this.opts.content),this.setWidth(this.opts.width),this._setMaxHeight()},e.prototype._show=function(){return t("body").addClass("qing-dialog-open"),this.el.show()&&s(this.el),this.opts.modal?this.el.addClass("in").one("transitionend",function(t){return function(){return t.el.addClass("open")}}(this)):this.el.addClass("open")},e.prototype.remove=function(){return this.el.removeClass("open"),this.wrapper.one("transitionend",function(t){return function(){return t.opts.modal?setTimeout(function(){return t.el.removeClass("in").one("transitionend",function(){return t._cleanup()})},0):t._cleanup()}}(this))},e.prototype.setContent=function(n){var e;return null!=(e=this.content)&&e.remove(),this.content=t(n).appendTo(this.wrapper)},e.prototype.setWidth=function(t){if(!this.opts.fullscreen)return this.wrapper.css("width",t)},e.prototype._setMaxHeight=function(){if(!this.opts.fullscreen)return this.wrapper.css("maxHeight",document.documentElement.clientHeight-40)},e.prototype._unbind=function(){return this.el.off(),t(document).off("keydown.qing-dialog-"+this.id),t(window).off("resize.qing-dialog-"+this.id)},e.prototype._cleanup=function(){return this.trigger("remove"),this.el.remove().removeData("qingDialog"),this._unbind(),t("body").removeClass("qing-dialog-open")},e}(n),s=function(n){var e;return e=n instanceof t?n[0]:n,e.offsetHeight},o.exports=r},{"./template.coffee":1}]},{},[]);return e("qing-dialog")});